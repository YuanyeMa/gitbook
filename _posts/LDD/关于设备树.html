
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>关于设备树 · Yuanye Ma`s blog</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Yuanye Ma">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="Kobject和sysfs.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Posts
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                    Dev Env
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../devEnv/2019-05-15-在ubuntu上安装vnc服务.html">
            
                <a href="../devEnv/2019-05-15-在ubuntu上安装vnc服务.html">
            
                    
                    2019-05-15-在ubuntu上安装vnc服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../devEnv/2019-07-24-配置jupyter-notebook服务.html">
            
                <a href="../devEnv/2019-07-24-配置jupyter-notebook服务.html">
            
                    
                    2019-07-24-配置jupyter-notebook服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../devEnv/2019-07-27-BreakWall.html">
            
                <a href="../devEnv/2019-07-27-BreakWall.html">
            
                    
                    2019 07 27 Break Wall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../devEnv/2019-11-05-记一次NVIDIA-Driver-cuda升级.html">
            
                <a href="../devEnv/2019-11-05-记一次NVIDIA-Driver-cuda升级.html">
            
                    
                    2019-11-05-记一次NVIDIA-Driver-cuda升级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../devEnv/2020-01-04-ubuntu%20部署NIS服务.md">
            
                <span>
            
                    
                    2020-01-04-ubuntu 部署NIS服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../devEnv/2020-02-05-BreakWall-2%20V2ray.md">
            
                <span>
            
                    
                    2020 02 05 Break Wall 2 V 2 Ray
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.7" data-path="../devEnv/2020-03-08-omv.html">
            
                <a href="../devEnv/2020-03-08-omv.html">
            
                    
                    2020 03 08 Omv
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.8" data-path="../devEnv/2020-03-29-noVnc.html">
            
                <a href="../devEnv/2020-03-29-noVnc.html">
            
                    
                    2020 03 29 No Vnc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.9" data-path="../devEnv/BreakWall-3-Trojan.html">
            
                <a href="../devEnv/BreakWall-3-Trojan.html">
            
                    
                    Break Wall 3 Trojan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.10" data-path="../devEnv/gitbook.html">
            
                <a href="../devEnv/gitbook.html">
            
                    
                    Gitbook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                    Diary
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../diary/2017-01-14-回顾2016年.html">
            
                <a href="../diary/2017-01-14-回顾2016年.html">
            
                    
                    2017-01-14-回顾2016年
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../diary/2019-01-04-2017考研年.html">
            
                <a href="../diary/2019-01-04-2017考研年.html">
            
                    
                    2019-01-04-2017考研年
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../diary/2019-01-09-我的2018.html">
            
                <a href="../diary/2019-01-09-我的2018.html">
            
                    
                    2019-01-09-我的2018
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../diary/2019-01-25-写在大连回家路上.html">
            
                <a href="../diary/2019-01-25-写在大连回家路上.html">
            
                    
                    2019-01-25-写在大连回家路上
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                    Hackintosh
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../Hackintosh/2019-04-15-Hackintosh（黑苹果）.html">
            
                <a href="../Hackintosh/2019-04-15-Hackintosh（黑苹果）.html">
            
                    
                    2019-04-15-Hackintosh（黑苹果）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../Hackintosh/2019-05-09-制作dmg格式的苹果镜像.html">
            
                <a href="../Hackintosh/2019-05-09-制作dmg格式的苹果镜像.html">
            
                    
                    2019-05-09-制作dmg格式的苹果镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../Hackintosh/2019-05-13-在黑苹果上部署开发环境.html">
            
                <a href="../Hackintosh/2019-05-13-在黑苹果上部署开发环境.html">
            
                    
                    2019-05-13-在黑苹果上部署开发环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../Hackintosh/2019-05-13-尝试吃黑苹果.html">
            
                <a href="../Hackintosh/2019-05-13-尝试吃黑苹果.html">
            
                    
                    2019-05-13-尝试吃黑苹果
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                    LDD
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="2020-10-05-Linux%20I2C子系统代码跟读.md">
            
                <span>
            
                    
                    2020-10-05-Linux I2C子系统代码跟读
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="2020-10-06-Linux设备驱动模型.html">
            
                <a href="2020-10-06-Linux设备驱动模型.html">
            
                    
                    2020-10-06-Linux设备驱动模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="2020-10-06-platform总线驱动.html">
            
                <a href="2020-10-06-platform总线驱动.html">
            
                    
                    2020-10-06-platform总线驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="2020-10-08-vim%20ctags cscope.md">
            
                <span>
            
                    
                    2020 10 08 Vim Ctags Cscope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="2020-10-09-loop设备的使用.html">
            
                <a href="2020-10-09-loop设备的使用.html">
            
                    
                    2020-10-09-loop设备的使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="2020-10-10-设备驱动基础.html">
            
                <a href="2020-10-10-设备驱动基础.html">
            
                    
                    2020-10-10-设备驱动基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="2020-10-11-linux驱动之LED驱动.html">
            
                <a href="2020-10-11-linux驱动之LED驱动.html">
            
                    
                    2020-10-11-linux驱动之LED驱动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.8" data-path="2020-10-27-linux驱动之中断（按键驱动）.html">
            
                <a href="2020-10-27-linux驱动之中断（按键驱动）.html">
            
                    
                    2020-10-27-linux驱动之中断（按键驱动）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.9" data-path="input子系统.html">
            
                <a href="input子系统.html">
            
                    
                    input子系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.10" data-path="Kobject和sysfs.html">
            
                <a href="Kobject和sysfs.html">
            
                    
                    Kobject和sysfs
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.4.11" data-path="关于设备树.html">
            
                <a href="关于设备树.html">
            
                    
                    关于设备树
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                    OS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../OS/2019-07-05-X86汇编.html">
            
                <a href="../OS/2019-07-05-X86汇编.html">
            
                    
                    2019-07-05-X86汇编
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../OS/2020-01-15-x86汇编从实模式到保护模式实验.html">
            
                <a href="../OS/2020-01-15-x86汇编从实模式到保护模式实验.html">
            
                    
                    2020-01-15-x86汇编从实模式到保护模式实验
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../OS/GDT%20LDT IDT TSS.md">
            
                <span>
            
                    
                    GDT LDT IDT TSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../OS/GNU%20C 嵌入汇编.md">
            
                <span>
            
                    
                    GNU C 嵌入汇编
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.5" data-path="../OS/kzalloc%20& kmalloc.md">
            
                <span>
            
                    
                    Kzalloc Kmalloc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.6" data-path="../OS/Linux%20Kernel Makefiles.md">
            
                <span>
            
                    
                    Linux Kernel Makefiles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.7" data-path="../OS/linux%20kernel slab系统.md">
            
                <span>
            
                    
                    linux kernel slab系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.8" data-path="../OS/Linux%20内核临时页表初始化.md">
            
                <span>
            
                    
                    Linux 内核临时页表初始化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.9" data-path="../OS/Linux%20内核存储管理.md">
            
                <span>
            
                    
                    Linux 内核存储管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.10" data-path="../OS/submit-patch.html">
            
                <a href="../OS/submit-patch.html">
            
                    
                    Submit Patch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.11" data-path="../OS/x86平台linux系统调用.html">
            
                <a href="../OS/x86平台linux系统调用.html">
            
                    
                    x86平台linux系统调用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.12" data-path="../OS/x86平台通用中断.html">
            
                <a href="../OS/x86平台通用中断.html">
            
                    
                    x86平台通用中断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.13" data-path="../OS/编译内核文档.html">
            
                <a href="../OS/编译内核文档.html">
            
                    
                    编译内核文档
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" >
            
                <span>
            
                    
                    Others
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../others/2019-01-04-Git-tag常用命令.html">
            
                <a href="../others/2019-01-04-Git-tag常用命令.html">
            
                    
                    2019-01-04-Git-tag常用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../others/2019-01-04-Makefile中的一些神奇用法.html">
            
                <a href="../others/2019-01-04-Makefile中的一些神奇用法.html">
            
                    
                    2019-01-04-Makefile中的一些神奇用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../others/2019-01-04-Shell中的source.html">
            
                <a href="../others/2019-01-04-Shell中的source.html">
            
                    
                    2019-01-04-Shell中的source
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.4" data-path="../others/2019-01-04-Shell编程中变量引用方法.html">
            
                <a href="../others/2019-01-04-Shell编程中变量引用方法.html">
            
                    
                    2019-01-04-Shell编程中变量引用方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.5" data-path="../others/2019-06-04-C++%20Primer Plus笔记.md">
            
                <span>
            
                    
                    2019-06-04-C++ Primer Plus笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.6" data-path="../others/2019-07-20-tensorboardX的简单用法.html">
            
                <a href="../others/2019-07-20-tensorboardX的简单用法.html">
            
                    
                    2019-07-20-tensorboardX的简单用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.7" data-path="../others/2019-07-29-stl入门.html">
            
                <a href="../others/2019-07-29-stl入门.html">
            
                    
                    2019-07-29-stl入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.8" data-path="../others/2019-08-06-C++继承.html">
            
                <a href="../others/2019-08-06-C++继承.html">
            
                    
                    2019-08-06-C++继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.9" data-path="../others/uboot.html">
            
                <a href="../others/uboot.html">
            
                    
                    Uboot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.10" data-path="../others/基于Ubuntu进行STM32程序开发.html">
            
                <a href="../others/基于Ubuntu进行STM32程序开发.html">
            
                    
                    基于Ubuntu进行STM32程序开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.11" data-path="../others/跟我一起写Makefile笔记.html">
            
                <a href="../others/跟我一起写Makefile笔记.html">
            
                    
                    跟我一起写Makefile笔记
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" >
            
                <span>
            
                    
                    笔试题
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../笔试题/2019-08-14-2019笔试题.html">
            
                <a href="../笔试题/2019-08-14-2019笔试题.html">
            
                    
                    2019-08-14-2019笔试题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../笔试题/2019-08-24-开发岗笔试基础题总结.html">
            
                <a href="../笔试题/2019-08-24-开发岗笔试基础题总结.html">
            
                    
                    2019-08-24-开发岗笔试基础题总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.3" data-path="../笔试题/2019-08-29-背包问题答题模板.html">
            
                <a href="../笔试题/2019-08-29-背包问题答题模板.html">
            
                    
                    2019-08-29-背包问题答题模板
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Draft
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../draft/30天自制操作系统实验记录.html">
            
                <a href="../../draft/30天自制操作系统实验记录.html">
            
                    
                    30天自制操作系统实验记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../draft/关于系统调用.html">
            
                <a href="../../draft/关于系统调用.html">
            
                    
                    关于系统调用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >关于设备树</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="linux&#x9A71;&#x52A8;&#x4E4B;&#x8BBE;&#x5907;&#x6811;&#xFF08;&#x534E;&#x6E05;&#x521B;&#x5BA2;&#x5B66;&#x9662;&#xFF09;">Linux&#x9A71;&#x52A8;&#x4E4B;&#x8BBE;&#x5907;&#x6811;&#xFF08;&#x534E;&#x6E05;&#x521B;&#x5BA2;&#x5B66;&#x9662;&#xFF09;</h1>
<p>Open Firmware Device Tree  -- &#x5F00;&#x53D1;&#x56FA;&#x4EF6;&#x8BBE;&#x5907;&#x6811;</p>
<ol>
<li>&#x63CF;&#x8FF0;&#x5305;&#x62EC;CPU&#x7684;&#x6570;&#x91CF;&#x3001;&#x7C7B;&#x522B;&#x3001;&#x5185;&#x5B58;&#x57FA;&#x5730;&#x5740;&#x548C;&#x5927;&#x5C0F;&#x3001;&#x603B;&#x7EBF;&#x548C;&#x6865;&#x3001;&#x5916;&#x8BBE;&#x8FDE;&#x63A5;&#x3001;&#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;&#x3001;GPIO&#x63A7;&#x5236;&#x5668;&#x3001;Clock&#x7B49;&#x3002;</li>
<li><code>ARM Linux</code>&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;<code>.dts</code>&#x6587;&#x4EF6;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;<code>ARM</code>&#x7684;<code>machine</code>&#xFF0C;&#x653E;&#x7F6E;&#x5728;&#x5185;&#x6838;&#x7684;<code>arch/arm/boot/dts/</code>&#x3002;</li>
<li><code>Device Tree</code>&#x7531;&#x4E00;&#x7CFB;&#x5217;&#x8282;&#x70B9;&#xFF08;<code>node</code>&#xFF09;&#x548C;&#x5176;&#x5C5E;&#x6027;&#xFF08;<code>property</code>&#xFF09;&#x7EC4;&#x6210;&#xFF0C;&#x800C;&#x8282;&#x70B9;&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x5C5E;&#x6027;&#x662F;&#x7531;&#x6210;&#x5BF9;&#x7684;&#xFF08;<code>key-value</code>&#xFF09;&#x6784;&#x6210;&#x3002;</li>
<li><code>DTS</code>&#x6E90;&#x6587;&#x4EF6;&#x7531;<code>DTC</code>&#x7F16;&#x8BD1;&#x4E3A;<code>DTB</code>&#x6587;&#x4EF6;&#xFF0C;&#x7531;<code>Bootloader</code>&#x4F20;&#x9012;&#x7ED9;&#x5185;&#x6838;&#xFF0C;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x5C55;&#x5F00;(<code>Flattened</code>)&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x786C;&#x4EF6;&#x7684;&#x62D3;&#x6251;&#x56FE;&#xFF0C;&#x5728;&#x7F16;&#x7A0B;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x83B7;&#x53D6;&#x8BBE;&#x5907;&#x6811;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x548C;&#x5C5E;&#x6027;&#x4FE1;&#x606F;&#x3002;</li>
</ol>
<h2 id="device-tree&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;">Device Tree&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;</h2>
<p>&#x5728;Linux 2.6&#x4E2D;<code>arch/arm/plat-xxx</code>&#x548C;<code>arch/arm/mach-xxx</code>&#x4E2D;&#x5145;&#x65A5;&#x7740;&#x5927;&#x91CF;&#x5783;&#x573E;&#x4EE3;&#x7801;&#x3002;&#x5982;&#xFF0C;&#x677F;&#x4E0A;&#x7684;<code>platform</code>&#x8BBE;&#x5907;&#xFF0C;<code>resource</code>  <code>i2c_board_info</code> <code>spi_board_info</code> &#x4EE5;&#x53CA;&#x5404;&#x79CD;&#x786C;&#x4EF6;<code>platform_data</code>&#x3002;&#x8FD9;&#x4E9B;&#x63CF;&#x8FF0;&#x677F;&#x7EA7;&#x7EC6;&#x8282;&#x7684;&#x4EE3;&#x7801;&#x5BF9;&#x5185;&#x6838;&#x800C;&#x8A00;&#x90FD;&#x662F;&#x5783;&#x573E;&#x3002;</p>
<h2 id="&#x7F16;&#x8BD1;&#x8BBE;&#x5907;&#x6811;">&#x7F16;&#x8BD1;&#x8BBE;&#x5907;&#x6811;</h2>
<ol>
<li><p><code>DTC</code>&#x662F;&#x7F16;&#x8BD1;&#x8BBE;&#x5907;&#x6811;&#x6E90;&#x6587;&#x4EF6;<code>.dts</code>&#x7F16;&#x8BD1;&#x4E3A;<code>.dtb</code>&#x7684;&#x5DE5;&#x5177;&#x3002;</p>
</li>
<li><p><code>DTC</code>&#x7684;&#x6E90;&#x7801;&#x4F4D;&#x4E8E;<code>scripts/dtc/</code>,&#x5728;Linux&#x5185;&#x6838;&#x4F7F;&#x80FD;&#x4E86;<code>Device Tree</code>&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7F16;&#x8BD1;&#x5185;&#x6838;&#x65F6;&#xFF0C;<code>dtc</code>&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x3002;</p>
</li>
<li><p>&#x5728;<code>arch/arm/boot/dts/Makefile</code>&#x4E2D;&#xFF0C;&#x63CF;&#x8FF0;&#x4E86;&#x5F53;&#x67D0;&#x79CD;SOC&#x88AB;&#x9009;&#x4E2D;&#x540E;&#xFF0C;&#x54EA;&#x4E9B;<code>.dtb</code>&#x6587;&#x4EF6;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x51FA;&#x6765;&#x3002;</p>
<p>&#x4F8B; <code>dtb-$(CONFIG_ARCH_EXYNOS)+=exynos4412-smdk4412.dtb  exynos4412-tiny4412.dtb</code></p>
</li>
<li><p><code>make dtbs</code></p>
</li>
</ol>
<h2 id="&#x7F29;&#x5199;&#x540D;&#x8BCD;&#x89E3;&#x91CA;">&#x7F29;&#x5199;&#x540D;&#x8BCD;&#x89E3;&#x91CA;</h2>
<p>DT : Device Tree</p>
<p>FDT : Flattened Device Tree</p>
<p>OF : Open Firmware</p>
<p>DTS  : Device Tree Source</p>
<p>DTSI  : Device Tree Source Include </p>
<p>DTB  : Device Tree Blob</p>
<p>DTC :  Device Tree Compiler</p>
<h2 id="&#x8BBE;&#x5907;&#x6811;&#x8BED;&#x6CD5;">&#x8BBE;&#x5907;&#x6811;&#x8BED;&#x6CD5;</h2>
<ul>
<li><p>&#x8282;&#x70B9;</p>
</li>
<li><p>&#x5C5E;&#x6027;</p>
</li>
<li><p>&#x6839;&#x8282;&#x70B9;</p>
</li>
<li><p><code>compatible</code>&#x5C5E;&#x6027;</p>
<p>&#x6307;&#x5B9A;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#xFF0C;&#x5B9E;&#x9645;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x5339;&#x914D;&#xFF0C;&#x81F3;&#x5C11;&#x5305;&#x542B;&#x4E00;&#x4E2A;&lt;&#x5236;&#x9020;&#x5546;&gt;&#xFF0C;&lt;&#x578B;&#x53F7;&gt;&#x5F62;&#x5F0F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x91CD;&#x8981;&#x7684;&#x662F;&#x8981;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x786E;&#x5207;&#x7684;&#x8BBE;&#x5907;&#xFF0C;&#x5E76;&#x4E14;&#x5305;&#x62EC;&#x5236;&#x9020;&#x5546;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x51B2;&#x7A81;&#x3002;&#x4F8B;&#x5982;&#xFF1A;<code>compatible= &quot;acme, coyotes-revenge;&quot;</code></p>
</li>
<li><p><code>reg</code>&#x5C5E;&#x6027;</p>
<p><code>reg</code>&#x7684;&#x7EC4;&#x7EC7;&#x5F62;&#x5F0F;&#x4E3A; <code>reg = &lt;address1 length1 [address2 length2] ... &gt;</code>&#x5176;&#x4E2D;&#x6BCF;&#x4E00;&#x7EC4;<code>address length</code>&#x8868;&#x660E;&#x4E86;&#x8BBE;&#x5907;&#x4F7F;&#x7528;&#x7684;&#x4E00;&#x4E2A;&#x5730;&#x5740;&#x8303;&#x56F4;&#x3002;</p>
</li>
<li><p><code>#address-cell</code>s&#x548C;<code>#size-cells</code>&#x5C5E;&#x6027;</p>
<pre><code class="lang-c"><span class="hljs-meta">#address-cells = &lt;1&gt;; &#x8868;&#x793A;address&#x5B57;&#x6BB5;&#x7684;&#x957F;&#x5EA6;&#x4E3A;1</span>
<span class="hljs-meta">#size-cells = &lt;1&gt;; &#x8868;&#x793A;length&#x5B57;&#x6BB5;&#x7684;&#x957F;&#x5EA6;&#x4E3A;1</span>

external-bus{
    <span class="hljs-meta">#address-cells = &lt;2&gt; </span>
    <span class="hljs-meta">#size-cells = &lt;1&gt;;</span>
    ethernet@<span class="hljs-number">0</span>,<span class="hljs-number">0</span>{
        compatible = <span class="hljs-string">&quot;smc, smc91c111&quot;</span>;
        reg = &lt;<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0x1000</span>&gt;; <span class="hljs-comment">// address&#x5360;&#x4E24;&#x4E2A;cells, length&#x5360;1&#x4E2A;cells</span>
    };
}
</code></pre>
</li>
</ul>
<ul>
<li>&#x6A21;&#x677F;</li>
</ul>
<pre><code class="lang-c">/{
    node1{
        a-<span class="hljs-built_in">string</span>-property = <span class="hljs-string">&quot;A String&quot;</span>;
        a-<span class="hljs-built_in">string</span>-<span class="hljs-built_in">list</span>-property = <span class="hljs-string">&quot;first string&quot;</span>, <span class="hljs-string">&quot;second string&quot;</span>;
        a-byte-data-property = [<span class="hljs-number">0x01</span> <span class="hljs-number">0x02</span> <span class="hljs-number">0x03</span> <span class="hljs-number">0x04</span>];
        child-node1 {
            dirst-child-property;
            second-child-property=&lt;<span class="hljs-number">1</span>&gt;;
            a-<span class="hljs-built_in">string</span>-property=<span class="hljs-string">&quot;Hello, world&quot;</span>;
        };
        child-node2{
        };
    };
    node2{
        an-empty-property;
        a-cell-property=&lt;<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>&gt;; <span class="hljs-comment">/* each number (cell) is a uint32 */</span>
        child-node1{
            mixed-property = <span class="hljs-string">&quot;a string&quot;</span>, [<span class="hljs-number">01</span> <span class="hljs-number">23</span> <span class="hljs-number">45</span> <span class="hljs-number">67</span>], &lt;<span class="hljs-number">0x12345678</span>&gt;;
        };
    };
}
</code></pre>
<h3 id="&#x4E2D;&#x65AD;&#x4FE1;&#x606F;">&#x4E2D;&#x65AD;&#x4FE1;&#x606F;</h3>
<pre><code class="lang-c">interrupt-controller : &#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x5B9A;&#x4E49;&#x8BE5;&#x8282;&#x70B9;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x63A5;&#x53D7;&#x4E2D;&#x65AD;&#x4FE1;&#x53F7;&#x7684;&#x8BBE;&#x5907;
<span class="hljs-meta">#interrupt-cells : &#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x58F0;&#x660E;&#x8BE5;&#x63A7;&#x5236;&#x5668;&#x4E0B;&#x4E2D;&#x65AD;&#x7684;cell&#x4E2A;&#x6570;</span>
interrupt-parent : &#x8BBE;&#x5907;&#x8282;&#x70B9;&#x5C5E;&#x6027;&#xFF0C;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;&#x7684;phandle&#xFF0C;&#x6CA1;&#x6709;&#x8BE5;&#x5C5E;&#x6027;&#x7684;&#x8282;&#x70B9;&#x4ECE;&#x7236;&#x8282;&#x70B9;&#x7EE7;&#x627F;&#x3002;
interrupts : &#x8BBE;&#x5907;&#x8282;&#x70B9;&#x5C5E;&#x6027;&#xFF0C;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x4E2D;&#x65AD;&#x6307;&#x793A;&#x7B26;&#x5217;&#x8868;&#xFF0C;&#x5BF9;&#x5E94;&#x6BCF;&#x4E2A;&#x4E2D;&#x65AD;&#x4FE1;&#x53F7;&#x3002;
</code></pre>
<p>&#x4F8B;</p>
<pre><code class="lang-c">/{
    compatible = <span class="hljs-string">&quot;acme, coyotes-revenge&quot;</span>;
    <span class="hljs-meta">#address-cells = &lt;1&gt;;</span>
    <span class="hljs-meta">#size-cells = &lt;1&gt;;</span>
    interrupt-parent=&lt;&amp;intc&gt;; <span class="hljs-comment">/* &#x58F0;&#x660E;&#x6B64;&#x8282;&#x70B9;&#x4EE5;&#x53CA;&#x6240;&#x6709;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;&#x8282;&#x70B9; */</span>

    serial@<span class="hljs-number">101f</span>0000{
        compatible = <span class="hljs-string">&quot;arm, pl011&quot;</span>;
        reg = &lt;<span class="hljs-number">0x101f0000</span> <span class="hljs-number">0x1000</span>&gt;;
        interrupts = &lt;<span class="hljs-number">1</span> <span class="hljs-number">0</span>&gt;; 
        <span class="hljs-comment">/* &#x5BF9;&#x4E8E;arm&#x67B6;&#x6784;&#xFF0C;&#x6807;&#x5FD7;&#x4F4D;&#x5177;&#x4F53;&#x542B;&#x4E49;Documentation/devicetree/bindings/arm/gic.txt */</span>
    };
    intc&#xFF1A; interrupt-controller@<span class="hljs-number">10140000</span>{
        compatible = <span class="hljs-string">&quot;arm, pl190&quot;</span>;
        reg = &lt;<span class="hljs-number">0x10140000</span> <span class="hljs-number">0x1000</span>&gt;;
        interrupt-controller;   <span class="hljs-comment">/* &#x58F0;&#x660E;&#x6B64;&#x8282;&#x70B9;&#x662F;&#x4E00;&#x4E2A;interrupt-controller */</span>
        <span class="hljs-meta">#interrupt-cells = &lt;2&gt;;</span>
    };
}
</code></pre>
<p>&#x5BF9;&#x4E8E;arm&#x67B6;&#x6784;&#xFF0C;&#x6807;&#x5FD7;&#x4F4D;&#x5177;&#x4F53;&#x542B;&#x4E49;<code>/Documentation/devicetree/bindings/interrupt-controller/arm,gic.txt</code>,&#x4F8B;&#x5982;</p>
<pre><code>- interrupt-controller : Identifies the node as an interrupt controller
- #interrupt-cells : Specifies the number of cells needed to encode an
  interrupt source.  The type shall be a &lt;u32&gt; and the value shall be 3.

  The 1st cell is the interrupt type; 0 for SPI interrupts, 1 for PPI
  interrupts.

  The 2nd cell contains the interrupt number for the interrupt type.
  SPI interrupts are in the range [0-987].  PPI interrupts are in the
  range [0-15].

  The 3rd cell is the flags, encoded as follows:
        bits[3:0] trigger type and level flags.
                1 = low-to-high edge triggered
                2 = high-to-low edge triggered (invalid for SPIs)
                4 = active high level-sensitive
                8 = active low level-sensitive (invalid for SPIs).
        bits[15:8] PPI interrupt cpu mask.  Each bit corresponds to each of
        the 8 possible cpus attached to the GIC.  A bit set to &apos;1&apos; indicated
        the interrupt is wired to that CPU.  Only valid for PPI interrupts.
        Also note that the configurability of PPI interrupts is IMPLEMENTATION
        DEFINED and as such not guaranteed to be present (most SoC available
        in 2014 seem to ignore the setting of this flag and use the hardware
        default value).
</code></pre><h2 id="&#x5E38;&#x7528;of-api">&#x5E38;&#x7528;OF API</h2>
<p><code>OF</code>&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#x4E3B;&#x8981;&#x96C6;&#x4E2D;&#x5728;<code>drivers/of/</code>&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x6709;<code>address.c base.c device.c fdt.c irq.c platform.c</code>&#x7B49;&#x7B49;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;of.h&gt;</span></span>
<span class="hljs-comment">/*&#x6839;&#x636E;device_node&#x7ED3;&#x6784;&#x7684;full_name&#x53C2;&#x6570;&#xFF0C;&#x5728;&#x5168;&#x5C40;&#x94FE;&#x8868;of_allnodes&#x4E2D;&#xFF0C;&#x67E5;&#x627E;&#x5408;&#x9002;&#x7684;device_node*/</span>
<span class="hljs-function"><span class="hljs-keyword">struct</span> device_node *<span class="hljs-title">of_find_node_by_path</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *path)</span></span>;

<span class="hljs-comment">/*&#x6839;&#x636E;property&#x7ED3;&#x6784;&#x7684;name&#x53C2;&#x6570;&#xFF0C;&#x5728;&#x6307;&#x5B9A;&#x7684;device_node&#x4E2D;&#x67E5;&#x627E;&#x5408;&#x9002;&#x7684;property*/</span>
<span class="hljs-function"><span class="hljs-keyword">struct</span> property *<span class="hljs-title">of_find_property</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> device_node *np, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *name, <span class="hljs-keyword">int</span> *lenp)</span></span>;

<span class="hljs-comment">/*&#x6839;&#x636E;compat&#x53C2;&#x6570;&#x4E0E;device node&#x7684;compatible&#x5339;&#x914D;&#xFF0C;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x5EA6;*/</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">of_device_is_compatible</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> device_node *device, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *compat)</span>

<span class="hljs-comment">/*&#x83B7;&#x5F97;&#x7236;&#x8282;&#x70B9;&#x7684;device node*/</span>
<span class="hljs-keyword">struct</span> device_node *<span class="hljs-title">of_get_parent</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> device_node *node)</span></span>;

<span class="hljs-comment">/*&#x6839;&#x636E;&#x5C5E;&#x6027;&#x540D;propname, &#x8BFB;&#x51FA;&#x8BE5;&#x5C5E;&#x6027;&#x7684;&#x6570;&#x7EC4;&#x4E2D;sz&#x4E2A;&#x5C5E;&#x6027;&#x503C;&#x7ED9;out_values*/</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">of_property_read_u32_arry</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> device_node *np, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *propname, u8 *out_values, size_t sz)</span></span>;

<span class="hljs-comment">/*&#x8BFB;&#x53D6;&#x8BE5;&#x8BBE;&#x5907;&#x7684;&#x7B2C;index&#x4E2A;irq&#x53F7;*/</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;linux/of_irq.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> <span class="hljs-title">irq_of_parse_and_map</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> device_node *dev, <span class="hljs-keyword">int</span> index)</span></span>;
</code></pre>
<h2 id="&#x8BBE;&#x5907;&#x6811;&#x5B9E;&#x6218;">&#x8BBE;&#x5907;&#x6811;&#x5B9E;&#x6218;</h2>
<pre><code class="lang-c"><span class="hljs-comment">// &#x5C06;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x63D2;&#x5165;&#x5230;dts&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6BD4;&#x5982; arch/arm/boot/dts/exynos4412-fs4412.dts</span>
test_node@<span class="hljs-number">12345678</span> {
    compatible = <span class="hljs-string">&quot;test, farsight&quot;</span>;
    reg = &lt;<span class="hljs-number">0xA2345678</span> <span class="hljs-number">0x23</span>
          <span class="hljs-number">0xB3456780</span> <span class="hljs-number">0x24</span>&gt;;
    testprop, mytest; <span class="hljs-comment">// &#x7A7A;&#x5C5E;&#x6027;</span>
    test_list_string = <span class="hljs-string">&quot;red fish&quot;</span>, <span class="hljs-string">&quot;bule fish&quot;</span>;
    interrupt-parent = &lt;&amp;gpx1&gt;;
    interrupts = &lt;<span class="hljs-number">1</span> <span class="hljs-number">2</span>&gt;;
};
<span class="hljs-comment">// &#x7F16;&#x8BD1;dts</span>
$ make dtbs
<span class="hljs-comment">// &#x62F7;&#x8D1D;&#x5230;&#x5F00;&#x53D1;&#x677F;&#xFF0C;&#x5E76;&#x7531;uboot&#x52A0;&#x8F7D;&#x540E;</span>
$ cd /proc/device-tree
$ ls test_node@<span class="hljs-number">12345678</span> <span class="hljs-comment">//&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BBE;&#x5907;&#x6811;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C; &#x5C5E;&#x6027;&#x503C;&#x662F;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</span>
</code></pre>
<p>&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x83B7;&#x5F97;&#x8282;&#x70B9;&#x7684;&#x4FE1;&#x606F;</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">static</span> irqreturn_t <span class="hljs-title">key_irq_handler</span><span class="hljs-params">(<span class="hljs-keyword">int</span> irqno, <span class="hljs-keyword">void</span> * data)</span>
</span>{
    <span class="hljs-keyword">return</span> IRQ_HANDLED;
}

<span class="hljs-meta"># <span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;linux/of.h&gt;</span></span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> __<span class="hljs-function">init <span class="hljs-title">led_drv_init</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-comment">/*&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;*/</span>

    <span class="hljs-comment">/*a.&#x83B7;&#x53D6;&#x8282;&#x70B9;*/</span>
    <span class="hljs-keyword">struct</span> devoce_node *np = <span class="hljs-literal">NULL</span>;
    np = of_find_node_by_path(<span class="hljs-string">&quot;/test_node@12345678&quot;</span>);
    <span class="hljs-keyword">if</span> (np) {
        printk(<span class="hljs-string">&quot;find test node ok\n&quot;</span>);
    } <span class="hljs-keyword">else</span> {
        printk(<span class="hljs-string">&quot;find test node failed!\n&quot;</span>);
    }
    <span class="hljs-comment">/* &#x8FD8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;node&#x7684;&#x5176;&#x4ED6;&#x4FE1;&#x606F;
        struct device_node {
            const char *name;
            const char *type;
            phandle phandle;
            char    *full_name;

            struct    property *properties;
            struct    property *deadprops;    <span class="hljs-comment">/* removed properties */</span>
            struct    device_node *parent;
            struct    device_node *child;
            struct    device_node *sibling;
            struct    device_node *next;    <span class="hljs-comment">/* next device of same type */</span>
            struct    device_node *allnext;    <span class="hljs-comment">/* next in list of all nodes */</span>
            struct    proc_dir_entry *pde;    <span class="hljs-comment">/* this node&apos;s proc directory */</span>
            struct    kref kref;
            unsigned long _flags;
            void    *data;
        #if defined(CONFIG_SPARC)
            char    *path_component_name;
            unsigned int unique_id;
            struct of_irq_controller *irq_trans;
        #endif
        };
    */</span>
    <span class="hljs-comment">/*b.&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x7684;&#x5C5E;&#x6027;*/</span> 
    <span class="hljs-keyword">struct</span> property *prop = <span class="hljs-literal">NULL</span>;
    prop = of_find_property(np, <span class="hljs-string">&quot;compatible&quot;</span>, <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">if</span> (prop) {
        printk(<span class="hljs-string">&quot;find compatible ok : %s\n&quot;</span>, prop-&gt;value);
    } <span class="hljs-keyword">else</span> {
        printk(<span class="hljs-string">&quot;find test node failed!\n&quot;</span>);
    }
    <span class="hljs-comment">/*c.&#x8BFB;&#x53D6;&#x5C5E;&#x6027;&#x4E2D;&#x7684;&#x6574;&#x6570;&#x6570;&#x7EC4;*/</span>
    <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> U32_DATA_LEN 4</span>
    u32 regdata[U32_DATA_LEN] = {<span class="hljs-number">0</span>};
    <span class="hljs-keyword">int</span> ret = <span class="hljs-number">0</span>;
    ret = of_property_read_u32_array(np, <span class="hljs-string">&quot;reg&quot;</span>, regdata, U32_DATA_LEN);
    <span class="hljs-keyword">if</span> (!ret) {
        <span class="hljs-keyword">int</span> i;
        <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;U32_DATA_LEN; i++) {
            printk(<span class="hljs-string">&quot;regdata[%d] : %x\n&quot;</span>, i, regdata[i]);
        }
    } <span class="hljs-keyword">else</span> {
        printk(<span class="hljs-string">&quot;get data of reg failed!\n&quot;</span>);
    }

    <span class="hljs-comment">/*c.&#x8BFB;&#x53D6;&#x5C5E;&#x6027;&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;*/</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *pstr[<span class="hljs-number">3</span>];
    <span class="hljs-keyword">int</span> i;
    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">3</span>; i++) {
        ret = of_property_read_string_index(np, <span class="hljs-string">&quot;test_list_string&quot;</span>, i, pstr[i]);  
        <span class="hljs-keyword">if</span> (!ret) {
            printk(<span class="hljs-string">&quot;regdata[%d] : %s\n&quot;</span>, i, pstr[i]);
        } <span class="hljs-keyword">else</span> {
            printk(<span class="hljs-string">&quot;get data of reg failed!\n&quot;</span>);
        }
    }
    <span class="hljs-comment">/*d.&#x901A;&#x8FC7;&#x67E5;&#x627E;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x5168;&#x5C40;&#x6807;&#x5FD7;*/</span>
    <span class="hljs-keyword">if</span> (of_find_property(np, <span class="hljs-string">&quot;testprop,mytest&quot;</span>, <span class="hljs-literal">NULL</span>)) {
        is_good = <span class="hljs-number">1</span>;
        printk(<span class="hljs-string">&quot;is good = %d\n&quot;</span>, is_good);
    }

    <span class="hljs-comment">/*e.&#x83B7;&#x53D6;&#x4E2D;&#x65AD;&#x7684;&#x53F7;&#x7801;*/</span>
    <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;linux/of_irq.h&gt;</span></span>
    <span class="hljs-keyword">int</span> irqno = irq_of_parse_and_map(np, <span class="hljs-number">0</span>);
    request_irq(irqno, key_irq_handler, IRQF_TRIGGER_FALLING, <span class="hljs-string">&quot;key_irq&quot;</span>, <span class="hljs-literal">NULL</span>);
}
module_init(led_drv_init);
</code></pre>
<pre><code class="lang-c"><span class="hljs-keyword">struct</span> of_device_id of_match_id[] = {
    {.compatible = <span class="hljs-string">&quot;test, farsight&quot;</span>}     <span class="hljs-comment">// &#x548C;&#x8BBE;&#x5907;&#x6811;&#x4E2D;&#x8282;&#x70B9;&#x7684;compatible&#x4FDD;&#x6301;&#x4E00;&#x81F4;</span>
};

<span class="hljs-keyword">struct</span> platform_driver led_pdrv = {
    .probe = led_pdrv_probe,
    .remove = led_pdrv_remove,
    .driver = {
        .name = <span class="hljs-string">&quot;samsung led_drv&quot;</span>,
        .of_match_table = of_match_id,<span class="hljs-comment">// &#x8BBE;&#x5907;&#x6811;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x5339;&#x914D;&#x8BBE;&#x5907;&#x548C;&#x9A71;&#x52A8;&#xFF0C;&#x4E0D;&#x518D;&#x7528;.id_table</span>
    },
    <span class="hljs-comment">// .id_table = led_id_table, </span>
};
</code></pre>
<h1 id="&#x97E6;&#x4E1C;&#x5C71;&#x8BB2;&#x8BBE;&#x5907;&#x6811;">&#x97E6;&#x4E1C;&#x5C71;&#x8BB2;&#x8BBE;&#x5907;&#x6811;</h1>
<p>&#x6B64;&#x90E8;&#x5206;&#x662F;&#x5BF9;&#x524D;&#x8FB9;&#x534E;&#x6E05;&#x521B;&#x5BA2;&#x5B66;&#x9662;&#x6240;&#x8BB2;&#x5185;&#x5BB9;&#x7684;&#x4E00;&#x4E2A;&#x8865;&#x5145;&#xFF0C;&#x91CD;&#x70B9;&#x5185;&#x5BB9;&#x6709;</p>
<ol>
<li>&#x5185;&#x6838;&#x542F;&#x52A8;&#x65F6;&#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x7684;&#x89E3;&#x6790;&#xFF1B;</li>
<li>dtb&#x6587;&#x4EF6;&#x8F6C;&#x6362;&#x4E3A;<code>device_node</code>&#x4EE5;&#x53CA;<code>device_node</code>&#x8F6C;&#x6362;&#x4E3A; <code>platform_device</code>&#x7684;&#x8FC7;&#x7A0B;&#xFF1B;</li>
<li>&#x5E73;&#x53F0;&#x8BBE;&#x5907;&#x548C;&#x5E73;&#x53F0;&#x9A71;&#x52A8;&#x7684;&#x5339;&#x914D;&#x5728;&#x5176;&#x4ED6;&#x6587;&#x7AE0;&#x4E2D;&#x6709;&#x603B;&#x7ED3;&#x8FC7;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x9700;&#x8981;&#x6CE8;&#x610F;<code>platform_match</code>&#x51FD;&#x6570;&#x4E2D;&#x5173;&#x4E8E;&#x8BBE;&#x5907;&#x6811;&#x5339;&#x914D;&#x7684;&#x65B9;&#x6CD5;&#xFF1B;</li>
</ol>
<p>&#x76EE;&#x524D;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x542C;&#x4E86;&#x4E00;&#x904D;&#x89C6;&#x9891;&#x8BFE;&#xFF0C;&#x540E;&#x7EED;&#x62BD;&#x65F6;&#x95F4;&#x5BF9;&#x7167;&#x4EE3;&#x7801;&#x518D;&#x4ED4;&#x7EC6;&#x7814;&#x7A76;&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x97E6;&#x4E1C;&#x5C71;&#x8BBE;&#x5907;&#x6811;&#x7684;&#x7B2C;&#x56DB;&#x8BFE;&#x662F;<strong>u-boot&#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x7684;&#x652F;&#x6301;</strong>&#xFF0C;&#x7559;&#x5230;&#x7814;&#x7A76;<code>u-boot</code>&#x65F6;&#x518D;&#x7EC6;&#x7A76;&#xFF1B;&#x7B2C;&#x4E94;&#x8BFE;&#x662F;<strong>&#x4E2D;&#x65AD;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8BBE;&#x5907;&#x6811;</strong>&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x6D89;&#x53CA;&#x5230;&#x5185;&#x6838;&#x5904;&#x7406;&#x4E2D;&#x65AD;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x4E5F;&#x7559;&#x5230;&#x4EE5;&#x540E;&#x518D;&#x7814;&#x7A76;&#x3002;</p>
<h2 id="&#x7B2C;&#x4E8C;&#x8BFE;-&#x8BBE;&#x5907;&#x6811;&#x7684;&#x89C4;&#x8303;&#x3010;dts&#x548C;dtb&#x3011;">&#x7B2C;&#x4E8C;&#x8BFE; &#x8BBE;&#x5907;&#x6811;&#x7684;&#x89C4;&#x8303;&#x3010;dts&#x548C;dtb&#x3011;</h2>
<h3 id="dts&#x6587;&#x4EF6;&#x5E03;&#x5C40;">DTS&#x6587;&#x4EF6;&#x5E03;&#x5C40;</h3>
<pre><code class="lang-c">/ {
    [property devinitions]
    [child nodes]    
};
Property&#x683C;&#x5F0F;&#xFF1A;[label:] property_name = property_value;  <span class="hljs-comment">//&#x4E5F;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x503C;&#xFF0C;&#x4E3A;&#x7A7A;&#x5C5E;&#x6027;</span>

 value &#x6709;&#x4E09;&#x79CD;&#x7C7B;&#x578B;
&lt;<span class="hljs-number">1</span> <span class="hljs-number">0x3</span> <span class="hljs-number">0x123</span>&gt;  &#xFF1A; <span class="hljs-number">32</span>&#x4F4D;&#x7684;&#x6570;&#x7EC4;
&#x201C;hello&#x201D; : &#x5B57;&#x7B26;&#x4E32;
[<span class="hljs-number">0x11</span> <span class="hljs-number">0x22</span> <span class="hljs-number">0x33</span>] : byte <span class="hljs-built_in">string</span>, &#x5341;&#x516D;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;byte&#xFF0C;&#x4E00;&#x4E2A;byte&#x7528;<span class="hljs-number">2</span>&#x4F4D;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x8868;&#x793A;&#xFF0C;byte&#x4E4B;&#x95F4;&#x7684;&#x7A7A;&#x683C;&#x53EF;&#x4EE5;&#x7701;&#x7565;
&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x968F;&#x610F;&#x7EC4;&#x5408;&#x4E3A;&#x5C5E;&#x6027;&#x7684;&#x503C;&#xFF0C;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x4E4B;&#x95F4;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;

Devicetree node&#x683C;&#x5F0F;
[label:] node-name[@unit-address] {
    [properties definitions]
    [chile nodes]
}
</code></pre>
<p>&#x7279;&#x6B8A;&#x7684;&#x3001;&#x9ED8;&#x8BA4;&#x7684;&#x5C5E;&#x6027;&#xFF1A;</p>
<blockquote>
<p>a. &#x6839;&#x8282;&#x70B9;</p>
<p>&#x200B;    #address-cells  : &#x5728;&#x5B83;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x7684;reg&#x5C5E;&#x6027;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x591A;&#x5C11;&#x4E2A;u32&#x6574;&#x6570;&#x6765;&#x63CF;&#x8FF0;&#x5730;&#x5740;&#xFF08;address&#xFF09;</p>
<p>&#x200B;    #size-cells  :&#x5728;&#x5B83;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x7684;reg&#x5C5E;&#x6027;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x591A;&#x5C11;&#x4E2A;u32&#x6574;&#x6570;&#x6765;&#x63CF;&#x8FF0;&#x5730;&#x5740;&#x957F;&#x5EA6;(length)</p>
<p>&#x200B;    compatible : &#x5B9A;&#x4E49;&#x4E00;&#x4E9B;&#x5217;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x5185;&#x6838;&#x4E2D;&#x54EA;&#x4E2A;machine_desc&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x672C;&#x8BBE;&#x5907;&#xFF0C;&#x5373;&#x8FD9;&#x4E2A;&#x677F;&#x5B50;&#x517C;&#x5BB9;&#x54EA;&#x4E9B;&#x5E73;&#x53F0;</p>
<p>&#x200B;    model  : &#x5982;&#x679C;&#x4E24;&#x6B3E;&#x677F;&#x5B50;&#x914D;&#x7F6E;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;compatible&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x901A;&#x8FC7;model&#x6765;&#x5206;&#x8FA8;&#x8FD9;&#x4E24;&#x5757;&#x677F;&#x5B50;</p>
<p>b. /memory</p>
<p>&#x200B;    device_type=&quot;memory&quot;;</p>
<p>&#x200B;    reg : &#x7528;&#x6765;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x7684;</p>
<p>c. /chosen</p>
<p>&#x200B;    bootargs  &#x5185;&#x6838;command line&#x53C2;&#x6570;&#xFF0C;&#x8DDF;u-boot&#x4E2D;&#x8BBE;&#x7F6E;&#x7684;bootargs&#x4F5C;&#x7528;&#x4E00;&#x6837;&#x3002;</p>
<p>d. /cpu/cpu*</p>
<p>&#x200B;    device_type=&quot;cpu&quot;</p>
<p>&#x200B;    reg  : &#x8868;&#x660E;&#x81EA;&#x5DF1;&#x662F;&#x54EA;&#x4E00;&#x4E2A;cpu</p>
</blockquote>
<p>&#x5F15;&#x7528;&#x5176;&#x4ED6;&#x8282;&#x70B9;</p>
<blockquote>
<p>a. phandle: // &#x8282;&#x70B9;&#x7684;phandle&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x7684;&#x53D6;&#x503C;&#x5FC5;&#x987B;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF08;&#x4E0D;&#x80FD;&#x548C;&#x5176;&#x4ED6;phandle&#x503C;&#x4E00;&#x6837;&#xFF09;</p>
<p>&#x200B;    pic@10000000 {</p>
<p>&#x200B;        phandle = <1>;</1></p>
<p>&#x200B;        interrupt-controller;  // &#x58F0;&#x660E;&#x81EA;&#x5DF1;&#x662F;&#x4E00;&#x4E2A;&#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;</p>
<p>&#x200B;    };</p>
<p>&#x200B;    another_device_node{</p>
<p>&#x200B;        interrupt-parent = <1>; //&#x4F7F;&#x7528;phandler&#x503C;&#x4E3A;1&#x6765;&#x5F15;&#x7528;&#x4E0A;&#x8FF0;&#x8282;&#x70B9;</1></p>
<p>&#x200B;    };</p>
<p>b. label:</p>
<p>&#x200B;    PIC: pic@10000000 {</p>
<p>&#x200B;        phandle = <1>;</1></p>
<p>&#x200B;        interrupt-controller;  // &#x58F0;&#x660E;&#x81EA;&#x5DF1;&#x662F;&#x4E00;&#x4E2A;&#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;</p>
<p>&#x200B;    };</p>
<p>&#x200B;    another_device_node{</p>
<p>&#x200B;        interrupt-parent = &lt;&amp;PIC&gt;; //&#x5F15;&#x7528;lable&#x4E3A;PIC&#x7684;&#x8282;&#x70B9;&#x4F5C;&#x4E3A;&#x4E2D;&#x65AD;&#x63A7;&#x5236;&#x5668;</p>
<p>&#x200B;    };</p>
<p>&#x5982;&#x679C;dtsi&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x67D0;&#x8282;&#x70B9;&#x5C5E;&#x6027;&#x4E0D;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;dts&#x6587;&#x4EF6;&#x4E2D;&#x8986;&#x76D6;&#x58F0;&#x660E;</p>
<p>&#x5982;&#x5728; dtsi&#x6587;&#x4EF6;&#x4E2D;&#x58F0;&#x660E;&#x4E86;LED&#x8282;&#x70B9;&#xFF0C;&#x4F46;&#x662F;&#x7BA1;&#x89D2;&#x548C;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5F15;&#x7528;LED&#x7684;label&#x5E76;&#x8986;&#x76D6;&#x58F0;&#x660E;</p>
<pre><code class="lang-c">&amp;LED { <span class="hljs-comment">// LED&#x4E3A;dtsi&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x8282;&#x70B9;label</span>
    pin = &lt;S3C2410_GPF(<span class="hljs-number">7</span>)&gt;;
}; <span class="hljs-comment">//&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x4E0D;&#x80FD;&#x5199;&#x5728;&#x6839;&#x8282;&#x70B9;&#x4E0B;</span>
&#x7B2C;&#x4E8C;&#x79CD;&#x8986;&#x76D6;&#x58F0;&#x660E;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x76F4;&#x63A5;&#x5728;/&#x6839;&#x8282;&#x70B9;&#x4E0B;&#x91CD;&#x65B0;&#x8986;&#x76D6;&#x58F0;&#x660E;&#x8282;&#x70B9;
/{
      led{
           pin=  &lt;S3C2410_GPF(<span class="hljs-number">7</span>)&gt;;
      };  
};
</code></pre>
</blockquote>
<h3 id="dtb&#x683C;&#x5F0F;">DTB&#x683C;&#x5F0F;</h3>
<p>&#x5185;&#x6838;&#x6587;&#x6863;&#xFF1A;/Documentation/devicetree/booting-without-of.txt</p>
<pre><code class="lang-c"><span class="hljs-comment">/*           ------------------------------
---- base -&gt; |  struct boot_param_header  |  // &#x6307;&#x793A;&#x5404;&#x4E2A;&#x6BB5;&#x7684;&#x504F;&#x79FB;&#x5730;&#x5740;
             ------------------------------
             |      (alignment gap) (*)   |
             ------------------------------
             |      memory reserve map    |  //
             ------------------------------
             |      (alignment gap)       |
             ------------------------------
             |                            |
             |    device-tree structure   |
             |                            |
             ------------------------------
             |      (alignment gap)       |
             ------------------------------
             |                            |
             |     device-tree strings    |
             |                            |
      -----&gt; ------------------------------
      |
      |
      --- (base + totalsize)
*/</span> 
<span class="hljs-keyword">struct</span> boot_param_header { 
        u32     magic;                  <span class="hljs-comment">/* magic word OF_DT_HEADER  0xd00dfeed */</span>
        u32     totalsize;              <span class="hljs-comment">/* total size of DT block */</span>
        u32     off_dt_struct;          <span class="hljs-comment">/* offset to structure */</span>
        u32     off_dt_strings;         <span class="hljs-comment">/* offset to strings */</span>
        u32     off_mem_rsvmap;         <span class="hljs-comment">/* offset to memory reserve map*/</span> 
        u32     version;                <span class="hljs-comment">/* format version */</span>
        u32     last_comp_version;      <span class="hljs-comment">/* last compatible version */</span>
        <span class="hljs-comment">/* version 2 fields below */</span>
        u32     boot_cpuid_phys;        <span class="hljs-comment">/* Which physical CPU id we&apos;re booting on */</span> 
        <span class="hljs-comment">/* version 3 fields below */</span>
        u32     size_dt_strings;        <span class="hljs-comment">/* size of the strings block */</span>
        <span class="hljs-comment">/* version 17 fields below */</span>
        u32    size_dt_struct;        <span class="hljs-comment">/* size of the DT structure block */</span> 
};
   Along with the constants:
<span class="hljs-comment">/* Definitions used by the flattened device tree */</span> 
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OF_DT_HEADER            0xd00dfeed      <span class="hljs-comment">/* 4: version, 4: total size */</span> </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OF_DT_BEGIN_NODE        0x1             <span class="hljs-comment">/* Start node: full name*/</span> </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OF_DT_END_NODE          0x2             <span class="hljs-comment">/* End node */</span> </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OF_DT_PROP              0x3             <span class="hljs-comment">/* Property: name off, size, content */</span> #<span class="hljs-meta-keyword">define</span> OF_DT_END               0x9             <span class="hljs-comment">/* &#x6574;&#x4E2A;structure block&#x7ED3;&#x675F;*/</span></span>
</code></pre>
<p>   All values in this header are in big endian format(&#x5927;&#x7AEF;&#x65B9;&#x5F0F;), the various fields in this header are defined more precisely below. All &quot;offset&quot; values are in bytes from the start of the header; that is from the physical base address of the device tree block.</p>
<pre><code>Here&apos;s the basic structure of a single node:
     * token OF_DT_BEGIN_NODE (that is 0x00000001) // + &#x8282;&#x70B9;&#x540D;&#x5B57;&#xFF0C;&#x8868;&#x793A;&#x8282;&#x70B9;&#x5F00;&#x59CB;
     * for version 1 to 3, this is the node full path as a zero terminated string, starting with &quot;/&quot;. For version 16 and later,
       this is the node unit name only (or an empty string for the
       root node)
     * [align gap to next 4 bytes boundary]
     * for each property:
        * token OF_DT_PROP (that is 0x00000003) //&#x5C5E;&#x6027;&#x5F00;&#x59CB;
        * 32-bit value of property value size in bytes (or 0 if no value) // value&#x957F;&#x5EA6;&#xFF0C;&#x5B57;&#x8282;
        * 32-bit value of offset in string block of property name // &#x5C5E;&#x6027;&#x540D;&#x5B57;&#x5728;string block&#x4E2D;&#x7684;&#x504F;&#x79FB;
        * property value data if any // &#x5C5E;&#x6027;&#x7684;&#x503C;
        * [align gap to next 4 bytes boundary] //4&#x5B57;&#x8282;&#x5BF9;&#x9F50;
     * [child nodes if any]
     * token OF_DT_END_NODE (that is 0x00000002) 
</code></pre><p>&#x200B;    Device tree &quot;strings&quot; block
&#x200B;    In order to save space, property names, which are generally redundant, are stored separately in the &quot;strings&quot; block. This block is simply the whole bunch of zero terminated strings for all property names concatenated together. The device-tree property definitions in the structure block will contain offset values from the beginning of the strings block. </p>
<p> &#x5C1D;&#x8BD5;&#x81EA;&#x5DF1;&#x5206;&#x6790;dtb&#x6587;&#x4EF6;&#x3002;</p>
<h2 id="&#x7B2C;&#x4E09;&#x8BFE;-&#x5185;&#x6838;&#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x7684;&#x5904;&#x7406;">&#x7B2C;&#x4E09;&#x8BFE; &#x5185;&#x6838;&#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x7684;&#x5904;&#x7406;</h2>
<h3 id="1-&#x4ECE;&#x6E90;&#x5934;&#x5206;&#x6790;&#xFF1A;&#x5185;&#x6838;heads&#x6587;&#x4EF6;&#x5BF9;dtb&#x6587;&#x4EF6;&#x7684;&#x7B80;&#x5355;&#x5904;&#x7406;">1. &#x4ECE;&#x6E90;&#x5934;&#x5206;&#x6790;&#xFF1A;&#x5185;&#x6838;head.S&#x6587;&#x4EF6;&#x5BF9;dtb&#x6587;&#x4EF6;&#x7684;&#x7B80;&#x5355;&#x5904;&#x7406;</h3>
<p>bootloader&#x542F;&#x52A8;&#x5185;&#x6838;&#x65F6;&#xFF0C;&#x4F1A;&#x8BBE;&#x7F6E;r0, r1, r2&#x4E09;&#x4E2A;&#x5BC4;&#x5B58;&#x5668;</p>
<ul>
<li>r0 &#x8BBE;&#x7F6E;&#x4E3A;0</li>
<li>r1 &#x8BBE;&#x7F6E;machine_id , &#x4F7F;&#x7528;&#x8BBE;&#x5907;&#x6811;&#x65F6;&#x8BE5;&#x53C2;&#x6570;&#x6CA1;&#x6709;&#x88AB;&#x4F7F;&#x7528;, &#x4F20;&#x9012;&#x7ED9;&#x4E86;<code>__machine_arch_type</code></li>
<li>r3 &#x8BBE;&#x7F6E;ATAGS&#x6216;&#x8005;DTB&#x7684;&#x542F;&#x59CB;&#x5730;&#x5740; , &#x4F20;&#x9012;&#x7ED9;&#x4E86;<code>__atags_pointer</code></li>
</ul>
<p>a.<code>__lookup_process_type</code> &#xFF1A; &#x4F7F;&#x7528;&#x6C47;&#x7F16;&#x6307;&#x4EE4;&#x8BFB;&#x53D6;<code>CPUID</code>&#x6839;&#x636E;&#x8BE5;ID&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;<code>proc_info_list</code>&#x7ED3;&#x6784;&#x4F53;&#xFF0C;&#x8BE5;&#x7ED3;&#x6784;&#x4F53;&#x79CD;&#x542B;&#x6709;&#x8FD9;&#x7C7B;CPU&#x7684;&#x521D;&#x59CB;&#x5316;&#x51FD;&#x6570;&#x548C;&#x4FE1;&#x606F;&#xFF1B;</p>
<p>b. <code>__vet_atags</code> &#xFF1A; &#x5224;&#x65AD;&#x662F;&#x5426;&#x5B58;&#x5728;&#x53EF;&#x7528;&#x7684;ATAGS&#x6216;&#x8005;DTB&#xFF1B;</p>
<p>c. <code>__create_page_tables</code> : &#x521B;&#x5EFA;&#x9875;&#x8868;&#xFF0C;&#x5373;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x5730;&#x5740;&#x548C;&#x7269;&#x7406;&#x5730;&#x5740;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF1B;</p>
<p>d. <code>__enable_mmu</code> : &#x4F7F;&#x80FD;MMU</p>
<p>e. <code>__mmap_switched</code> &#xFF1A;&#x5207;&#x6362;&#x7269;&#x7406;&#x5730;&#x5740;&#x4E3A;&#x865A;&#x62DF;&#x5730;&#x5740;</p>
<p>f. &#x628A;<code>bootloader</code>&#x4F20;&#x5165;&#x7684;<code>r2</code>&#x5BC4;&#x5B58;&#x5668;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x4FDD;&#x5B58;&#x5230;&#x53D8;&#x91CF;<code>__atags_pointer</code>&#x4E2D;</p>
<p>g. &#x8C03;&#x7528;C&#x51FD;&#x6570;<code>start_kernel</code></p>
<h3 id="2-&#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x4E2D;&#x5E73;&#x53F0;&#x4FE1;&#x606F;&#x7684;&#x5904;&#x7406;">2. &#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x4E2D;&#x5E73;&#x53F0;&#x4FE1;&#x606F;&#x7684;&#x5904;&#x7406;</h3>
<p>dts&#x6587;&#x4EF6;&#x4E2D;&#x201C;&#x6839;&#x8282;&#x70B9;&#x201D;&#x4F1A;&#x58F0;&#x660E;&#x517C;&#x5BB9;&#x4EC0;&#x4E48;&#x6837;&#x7684;<code>machine_desc</code></p>
<pre><code class="lang-c">/{
    model = <span class="hljs-string">&quot;SMDK2440&quot;</span>;
    compatible = <span class="hljs-string">&quot;samsung, smdk2440&quot;</span>, <span class="hljs-string">&quot;samsung, smdk2410&quot;</span> <span class="hljs-comment">//&#x58F0;&#x660E;&#x4E00;&#x7CFB;&#x5217;&#x517C;&#x5BB9;&#x7684;&#x5355;&#x677F;&#xFF0C;&#x4F9D;&#x517C;&#x5BB9;&#x6027;&#x9AD8;&#x4F4E;&#x6392;&#x5217;&#x3002;</span>
}
</code></pre>
<p>&#x5185;&#x6838;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;<code>machine_desc</code>&#xFF0C;&#x540C;&#x6837;&#x4E5F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x8868;&#x660E;&#x81EA;&#x5DF1;&#x652F;&#x6301;&#x54EA;&#x4E9B;&#x5355;&#x677F;</p>
<pre><code class="lang-c"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *<span class="hljs-keyword">const</span> smdk2440_dt_compt[] __initconst = {
    <span class="hljs-string">&quot;samsung, smdk2440&quot;</span>,
    <span class="hljs-literal">NULL</span>
};
MACHINE_START(S3C2440, <span class="hljs-string">&quot;smdk2440&quot;</span>)
    ...
    .dt_compat = smdk2440_dt_compt, <span class="hljs-comment">//&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;</span>
    ...
MACHINE_END
</code></pre>
<p>&#x5047;&#x8BBE;&#x6709;&#x591A;&#x4E2A;<code>machine_desc</code>&#x548C;<code>dts</code>&#x7B26;&#x5408;&#xFF0C;&#x8BE5;&#x9009;&#x62E9;&#x54EA;&#x4E00;&#x4E2A;? &#x770B;&#x770B;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x8FC7;&#x7A0B;</p>
<pre><code class="lang-c">start_kernel <span class="hljs-comment">// init/main.c</span>
    setup_arch(&amp;command_line); <span class="hljs-comment">// arch/arm/kernel/setup.c</span>
        mdesc = setup_machine_fdt(__atags_pointer); <span class="hljs-comment">// arch/arm/kernel/devtree.c</span>
            early_init_dt_verify(phys_to_virt(dt_phys)) <span class="hljs-comment">//&#x6B64;&#x51FD;&#x6570;&#x68C0;&#x67E5;__atags_pointer&#x662F;&#x5426;&#x6709;DTB&#x5934;</span>
                init_boot_params = params; <span class="hljs-comment">//&#x5982;&#x679C;&#x662F;DTB&#xFF0C;&#x5219;&#x5C06;DTB&#x865A;&#x62DF;&#x5730;&#x5740;&#x4FDD;&#x5B58;&#x4E3A;&#x5168;&#x5C40;&#x53D8;&#x91CF;</span>
                mdesc = of_flat_dt_match_machine(mdesc_best, arch_get_next_mach); <span class="hljs-comment">//&#x627E;&#x5230;&#x6700;&#x5339;&#x914D;&#x7684;mdesc, arch_get_next_mach&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6307;&#x9488;&#xFF0C;&#x6B64;&#x51FD;&#x6570;&#x4F1A;&#x4F9D;&#x6B21;&#x53D6;&#x51FA;mdesc&#x5E76;&#x8FD4;&#x56DE;m-&gt;dt_compat</span>
                    <span class="hljs-keyword">while</span>((data==get_next_compat())) {
                        score = of_flat_dt_match();
                            <span class="hljs-keyword">if</span> (score&gt;<span class="hljs-number">0</span> &amp;&amp; score&lt;best_score) {
                                best_data = data;
                                best_score = score;
                            }
                    }
        machine_desc = mdesc;
</code></pre>
<h3 id="3-&#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x8FD0;&#x884C;&#x65F6;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x7684;&#x5904;&#x7406;">3. &#x5BF9;&#x8BBE;&#x5907;&#x6811;&#x8FD0;&#x884C;&#x65F6;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x7684;&#x5904;&#x7406;</h3>
<p>&#x5728;&#x4E0A;&#x4E00;&#x8282;&#x4E2D;&#x627E;&#x5230;&#x6700;&#x5339;&#x914D;&#x7684;<code>mdesc</code>&#x540E;<code>early_init_dt_scan_nodes()</code>&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x5904;&#x7406;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x3002;</p>
<p>a. <code>/chosen</code>&#x4E2D;&#x7684;<code>bootargs</code>&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x5B58;&#x5165;&#x5168;&#x5C40;&#x53D8;&#x91CF;<code>boot_command_line</code> :</p>
<p>b. &#x786E;&#x5B9A;&#x6839;&#x8282;&#x70B9;&#x7684;<code>#address-cells</code> &#x548C;<code>#size-cells</code>&#x5B58;&#x5165;&#x5168;&#x5C40;&#x53D8;&#x91CF;<code>dt_root_addr_cells</code>&#x548C;<code>dt_root_size_cells</code>;</p>
<p>c. &#x89E3;&#x6790;<code>/memory</code>&#x4E2D;&#x7684;<code>reg</code>&#x5C5E;&#x6027;&#xFF0C;&#x63D0;&#x53D6;&#x51FA;<code>base,size</code>&#x6700;&#x7EC8;&#x8C03;&#x7528;<code>memblock_add(base,size)</code>;</p>
<h3 id="4-dtb&#x6587;&#x4EF6;&#x8F6C;&#x6362;&#x4E3A;devicenode">4. dtb&#x6587;&#x4EF6;&#x8F6C;&#x6362;&#x4E3A;<code>device_node</code></h3>
<p>&#x5185;&#x5B58;&#x4E2D;&#x5982;&#x4F55;&#x4FDD;&#x7559;<code>DTB</code>&#x533A;&#x57DF;</p>
<pre><code class="lang-c">start_kernel();
    setup_arch();
        arm_memblock_init();
            early_init_fdt_reserve_self();
                <span class="hljs-comment">/* &#x628A;DTB&#x6240;&#x5360;&#x533A;&#x57DF;&#x4FDD;&#x7559;&#x4E0B;&#x6765;&#xFF0C;&#x5373;&#x8C03;&#x7528; memblock_reserve() */</span>
                early_init_dt_reserve_memory_arch(); 
            <span class="hljs-comment">/* &#x6839;&#x636E;dtb&#x4E2D;&#x7684;memreserve&#x4FE1;&#x606F;&#x8C03;&#x7528;memblock_reserve() */</span>
            early_init_fdt_scan_reserved_mem();
</code></pre>
<p>&#x8BBE;&#x5907;&#x6811;&#x8282;&#x70B9;&#x5C55;&#x5F00;&#x7684;&#x6837;&#x5B50;</p>
<pre><code class="lang-c"><span class="hljs-keyword">struct</span> device_node {
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *name; <span class="hljs-comment">// &#x6765;&#x81EA;&#x8282;&#x70B9;&#x4E2D;&#x7684;name&#x5C5E;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BE5;&#x5C5E;&#x6027;&#xFF0C;&#x5219;&#x8BBE;&#x4E3A;NULL</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *type; <span class="hljs-comment">// &#x6765;&#x81EA;&#x8282;&#x70B9;&#x4E2D;&#x7684;device_type&#x5C5E;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BE5;&#x5C5E;&#x6027;&#xFF0C;&#x5219;&#x8BBE;&#x4E3A;NULL</span>
};

<span class="hljs-keyword">struct</span> property{
    <span class="hljs-keyword">char</span> *name;
    <span class="hljs-keyword">int</span> length;
    value;
    next; 
};
<span class="hljs-comment">// &#x753B;&#x4E00;&#x4E0B; &#x7ED3;&#x6784;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;</span>
</code></pre>
<pre><code class="lang-c">unflatten_device_tree(<span class="hljs-keyword">void</span>)  <span class="hljs-comment">// arch/arm/kernel/setup.c</span>
</code></pre>
<p>a. &#x5728;<code>DTB</code>&#x6587;&#x4EF6;&#x4E2D;</p>
<p>&#x200B;        &#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x4EE5;<code>TAG(FDT_BEGIN_NODE,  0x00000001)</code>&#x5F00;&#x59CB;&#xFF0C;&#x8282;&#x70B9;&#x5185;&#x90E8;&#x53EF;&#x4EE5;&#x5D4C;&#x5957;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#xFF1B;</p>
<p>&#x200B;        &#x6BCF;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x4EE5;<code>TAG(FDT_PROP,  0x00000003)</code>&#x5F00;&#x59CB;&#xFF1B;</p>
<p>b. &#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x8F6C;&#x6362;&#x4E3A;<code>struct device_node</code>&#x7ED3;&#x6784;&#x4F53;&#xFF0C; &#x6BCF;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x8F6C;&#x6362;&#x4E3A;<code>struct property</code>&#x7ED3;&#x6784;&#x4F53;&#xFF1B;</p>
<p>&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;</p>
<h3 id="5-devicenode&#x8F6C;&#x6362;&#x4E3A;platformdevice">5. <code>device_node</code>&#x8F6C;&#x6362;&#x4E3A;<code>platform_device</code></h3>
<p>dts-&gt;dtb-&gt;device_node-&gt;platform_device</p>
<p>&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<p>a. &#x54EA;&#x4E9B;<code>device_node</code>&#x53EF;&#x4EE5;&#x8F6C;&#x6362;&#x6210;<code>platform_device</code></p>
<p>&#x200B;        &#x5FC5;&#x987B;&#x5305;&#x542B;<code>compatible</code>&#x5C5E;&#x6027;</p>
<p>b. &#x600E;&#x4E48;&#x8F6C;&#x6362;&#xFF1F; </p>
<p>&#x200B;        <code>platform_device</code>&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x7684;<code>resource</code>&#x6570;&#x7EC4;&#xFF0C;&#x8868;&#x793A;&#x8BBE;&#x5907;&#x6240;&#x9700;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5B83;&#x6765;&#x81EA;&#x4E8E;<code>device_node</code>&#x7684;<code>reg</code>&#x548C;<code>interrupts</code>&#x5C5E;&#x6027;&#x3002; <code>platform_device.dev.of_node</code>&#x6307;&#x5411;<code>device_node</code>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x6765;&#x83B7;&#x53D6;&#x5176;&#x4ED6;&#x5C5E;&#x6027;&#x3002;</p>
<p>&#x200B;    &#x51FD;&#x6570;&#x8C03;&#x7528;&#x8FC7;&#x7A0B;</p>
<pre><code class="lang-c">of_platform_default_populate_init
    &#x6B64;&#x51FD;&#x6570;&#x88AB;&#x7F16;&#x8BD1;&#x5230;initcall3&#x6BB5;&#xFF0C;&#x5728;&#x5185;&#x6838;&#x542F;&#x52A8;&#x65F6;&#x88AB;&#x8C03;&#x7528;

<span class="hljs-function">start_kernel
    <span class="hljs-title">reset_init</span><span class="hljs-params">()</span></span>;
        pid = kernel_thread(kernel_init, <span class="hljs-literal">NULL</span>, CLONEFS)

<span class="hljs-function">kernel_init
     <span class="hljs-title">kernel_init_freeable</span><span class="hljs-params">()</span></span>;
        do_basic_setup();
            do_initcalls();
                <span class="hljs-keyword">for</span> (level=<span class="hljs-number">0</span>; level&lt;ARRAY_SIZE(initcall_levels)<span class="hljs-number">-1</span>; level++)
                    do_initcall_level(level)


of_platform_default_populate_init&#x751F;&#x6210;platform_device&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;
    <span class="hljs-function">of_platform_default_populate_init
        <span class="hljs-title">of_platform_default_populate</span><span class="hljs-params">(<span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>)</span></span>;
            of_platform_populate(<span class="hljs-literal">NULL</span>, of_dafault_bus_match_table, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>)
                for_each_child_of_node(root, child) {
                    rc = of_platform_bus_create(child, matches, lookup, parent, <span class="hljs-literal">true</span>);<span class="hljs-comment">// &#x8C03;&#x7528;&#x8FC7;&#x7A0B;&#x5728;&#x540E;&#x8FB9;</span>
                        dev = of_device_alloc(np, bus_id, parent); <span class="hljs-comment">//&#x6839;&#x636E;device_node&#x8282;&#x70B9;&#x7684;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;platform_device&#x7684;resource</span>
                   <span class="hljs-keyword">if</span> (rc) {
                       of_node_put(child);
                       <span class="hljs-keyword">break</span>;
                   }
                }
</code></pre>
<h3 id="6-&#x5E73;&#x53F0;&#x8BBE;&#x5907;&#x548C;&#x5E73;&#x53F0;&#x9A71;&#x52A8;&#x7684;&#x5339;&#x914D;">6. &#x5E73;&#x53F0;&#x8BBE;&#x5907;&#x548C;&#x5E73;&#x53F0;&#x9A71;&#x52A8;&#x7684;&#x5339;&#x914D;</h3>
<p>&#x5339;&#x914D;&#x51FD;&#x6570;&#x662F;<code>platform_bus_type.match</code>&#x5373;<code>platform_match</code></p>
<p>a. &#x6BD4;&#x8F83;<code>platform_devive.driver_override</code>&#x548C;<code>platform_driver.drv-&gt;name</code></p>
<p>b. &#x6BD4;&#x8F83;<code>platform_device.dev.of_node</code>&#x7684;<code>compatible</code>&#x5C5E;&#x6027;&#x548C;<code>platform_driver.drv-&gt;of_match_table</code></p>
<p>c. &#x6BD4;&#x8F83;<code>platform_device.name</code>&#x548C;<code>platform_driver.id_table</code></p>
<p>d. &#x6BD4;&#x8F83;<code>platform_device.name</code>&#x548C;<code>platform_driver.drv-&gt;name</code></p>
<p>&#x6709;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x5339;&#x914D;&#x6210;&#x529F;&#x3002;</p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; Yuanye.Ma 2020-2021 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2023-04-02 10:05:52
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Kobject和sysfs.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Kobject和sysfs">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"关于设备树","level":"1.2.4.11","depth":3,"next":{"title":"OS","level":"1.2.5","depth":2,"ref":"","articles":[{"title":"2019-07-05-X86汇编","level":"1.2.5.1","depth":3,"path":"_posts/OS/2019-07-05-X86汇编.md","ref":"_posts/OS/2019-07-05-X86汇编.md","articles":[]},{"title":"2020-01-15-x86汇编从实模式到保护模式实验","level":"1.2.5.2","depth":3,"path":"_posts/OS/2020-01-15-x86汇编从实模式到保护模式实验.md","ref":"_posts/OS/2020-01-15-x86汇编从实模式到保护模式实验.md","articles":[]},{"title":"GDT LDT IDT TSS","level":"1.2.5.3","depth":3,"path":"_posts/OS/GDT%20LDT IDT TSS.md","ref":"_posts/OS/GDT%20LDT IDT TSS.md","articles":[]},{"title":"GNU C 嵌入汇编","level":"1.2.5.4","depth":3,"path":"_posts/OS/GNU%20C 嵌入汇编.md","ref":"_posts/OS/GNU%20C 嵌入汇编.md","articles":[]},{"title":"Kzalloc Kmalloc","level":"1.2.5.5","depth":3,"path":"_posts/OS/kzalloc%20& kmalloc.md","ref":"_posts/OS/kzalloc%20& kmalloc.md","articles":[]},{"title":"Linux Kernel Makefiles","level":"1.2.5.6","depth":3,"path":"_posts/OS/Linux%20Kernel Makefiles.md","ref":"_posts/OS/Linux%20Kernel Makefiles.md","articles":[]},{"title":"linux kernel slab系统","level":"1.2.5.7","depth":3,"path":"_posts/OS/linux%20kernel slab系统.md","ref":"_posts/OS/linux%20kernel slab系统.md","articles":[]},{"title":"Linux 内核临时页表初始化","level":"1.2.5.8","depth":3,"path":"_posts/OS/Linux%20内核临时页表初始化.md","ref":"_posts/OS/Linux%20内核临时页表初始化.md","articles":[]},{"title":"Linux 内核存储管理","level":"1.2.5.9","depth":3,"path":"_posts/OS/Linux%20内核存储管理.md","ref":"_posts/OS/Linux%20内核存储管理.md","articles":[]},{"title":"Submit Patch","level":"1.2.5.10","depth":3,"path":"_posts/OS/submit-patch.md","ref":"_posts/OS/submit-patch.md","articles":[]},{"title":"x86平台linux系统调用","level":"1.2.5.11","depth":3,"path":"_posts/OS/x86平台linux系统调用.md","ref":"_posts/OS/x86平台linux系统调用.md","articles":[]},{"title":"x86平台通用中断","level":"1.2.5.12","depth":3,"path":"_posts/OS/x86平台通用中断.md","ref":"_posts/OS/x86平台通用中断.md","articles":[]},{"title":"编译内核文档","level":"1.2.5.13","depth":3,"path":"_posts/OS/编译内核文档.md","ref":"_posts/OS/编译内核文档.md","articles":[]}]},"previous":{"title":"Kobject和sysfs","level":"1.2.4.10","depth":3,"path":"_posts/LDD/Kobject和sysfs.md","ref":"_posts/LDD/Kobject和sysfs.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-search","-lunr","search-pro","pageview-count","page-toc-button","back-to-top-button","tbfed-pagefooter"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Yuanye.Ma 2020-2021","modify_label":"文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"page-toc-button":{"maxTocDepth":2,"minTocSize":2},"search-pro":{},"pageview-count":{},"back-to-top-button":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Yuanye Ma","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Yuanye Ma`s blog","gitbook":"*","description":"Blog for Yuanye.Ma"},"file":{"path":"_posts/LDD/关于设备树.md","mtime":"2023-04-02T10:05:52.101Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-04-02T10:06:51.106Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

